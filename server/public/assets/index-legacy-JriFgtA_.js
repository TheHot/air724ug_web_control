System.register(["./index-legacy-DEO5MG59.js","./index-legacy-CKdb1S0Y.js"],(function(e,t){"use strict";var a,n,l,o,i,r,s,u,c,d,g,p,f,m,v,h,b,y,x,k,S,w,B,C,M,V,I,z,T,A,P,E,$,q,L,W,j,R,D,F,H,N,O;return{setters:[e=>{a=e.d,n=e.a4,l=e.c,o=e.a5,i=e.as,r=e.f,s=e.a7,u=e.M,c=e.n,d=e.I,g=e.p,p=e.i,f=e.U,m=e.at,v=e.ak,h=e.au,b=e.ae,y=e.av,x=e.a,k=e.r,S=e.a6,w=e.V,B=e.D,C=e.R,M=e.w,V=e.o,I=e.g,z=e.e,T=e.W,A=e.aw,P=e.ax,E=e.m,$=e.B,q=e.S,L=e.ay,W=e.t,j=e.$,R=e.az,D=e.aA,F=e.aB},e=>{H=e.L,N=e.C,O=e.c}],execute:function(){const[t,K]=l("button"),U=n({},s,{tag:u("button"),text:String,icon:String,type:u("default"),size:u("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:u("button"),loadingSize:c,loadingText:String,loadingType:String,iconPosition:u("left")});var G=a({name:t,props:U,emits:["click"],setup(e,{emit:t,slots:a}){const n=o(),l=()=>e.loading?a.loading?a.loading():r(H,{size:e.loadingSize,type:e.loadingType,class:K("loading")},null):a.icon?r("div",{class:K("icon")},[a.icon()]):e.icon?r(d,{name:e.icon,class:K("icon"),classPrefix:e.iconPrefix},null):void 0,s=()=>{let t;if(t=e.loading?e.loadingText:a.default?a.default():e.text,t)return r("span",{class:K("text")},[t])},u=()=>{const{color:t,plain:a}=e;if(t){const e={color:a?t:"white"};return a||(e.background=t),t.includes("gradient")?e.border=0:e.borderColor=t,e}},c=a=>{e.loading?g(a):e.disabled||(t("click",a),n())};return()=>{const{tag:t,type:a,size:n,block:o,round:d,plain:g,square:p,loading:f,disabled:m,hairline:v,nativeType:h,iconPosition:b}=e,y=[K([a,n,{plain:g,block:o,round:d,square:p,loading:f,disabled:m,hairline:v}]),{[i]:v}];return r(t,{type:h,class:y,style:u(),disabled:m,onClick:c},{default:()=>[r("div",{class:K("content")},["left"===b&&l(),s(),"right"===b&&l()])]})}}});e("B",p(G));let J=0;function Q(e){return Array.isArray(e)?!e.length:0!==e&&!e}function X(e,t){const{message:a}=t;return b(a)?a(e,t):a||""}function Y({target:e}){e.composing=!0}function Z({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function _(e){return[...e].length}function ee(e,t){return[...e].slice(0,t).join("")}const[te,ae]=l("field"),ne={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:c,max:Number,min:Number,formatter:Function,clearIcon:u("clear"),modelValue:E(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:u("focus"),formatTrigger:u("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},le=n({},O,ne,{rows:c,type:u("text"),rules:Array,autosize:[Boolean,Object],labelWidth:c,labelClass:$,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var oe=a({name:te,props:le,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:a}){const n=function(){const e=f(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++J}`}(),l=x({status:"unvalidated",focused:!1,validateMessage:""}),o=k(),i=k(),s=k(),{parent:u}=S(q),c=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},p=t=>T(e[t])?e[t]:u&&T(u.props[t])?u.props[t]:void 0,b=w((()=>{const t=p("readonly");if(e.clearable&&!t){const t=""!==c(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&l.focused;return t&&a}return!1})),E=w((()=>s.value&&a.input?s.value():e.modelValue)),$=w((()=>{var t;const a=p("required");return"auto"===a?null==(t=e.rules)?void 0:t.some((e=>e.required)):a})),H=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===l.status)return;let{value:e}=E;if(t.formatter&&(e=t.formatter(e,t)),!function(e,t){if(Q(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}(e,t))return l.status="failed",void(l.validateMessage=X(e,t));if(t.validator){if(Q(e)&&!1===t.validateEmpty)return;return function(e,t){return new Promise((a=>{const n=t.validator(e,t);y(n)?n.then(a):a(n)}))}(e,t).then((a=>{a&&"string"==typeof a?(l.status="failed",l.validateMessage=a):!1===a&&(l.status="failed",l.validateMessage=X(e,t))}))}}))),Promise.resolve()),O=()=>{l.status="unvalidated",l.validateMessage=""},K=()=>t("endValidate",{status:l.status,message:l.validateMessage}),U=(a=e.rules)=>new Promise((n=>{O(),a?(t("startValidate"),H(a).then((()=>{"failed"===l.status?(n({name:e.name,message:l.validateMessage}),K()):(l.status="passed",n(),K())}))):n()})),G=t=>{if(u&&e.rules){const{validateTrigger:a}=u.props,n=L(a).includes(t),l=e.rules.filter((e=>e.trigger?L(e.trigger).includes(t):n));l.length&&U(l)}},te=(a,n="onChange")=>{var i,r;const s=a;a=(t=>{var a;const{maxlength:n}=e;if(T(n)&&_(t)>+n){const e=c();if(e&&_(e)===+n)return e;const i=null==(a=o.value)?void 0:a.selectionEnd;if(l.focused&&i){const e=[...t],a=e.length-+n;return e.splice(i-a,a),e.join("")}return ee(t,+n)}return t})(a);const u=_(s)-_(a);if("number"===e.type||"digit"===e.type){const t="number"===e.type;if(a=A(a,t,t),"onBlur"===n&&""!==a&&(void 0!==e.min||void 0!==e.max)){const t=P(+a,null!=(i=e.min)?i:-1/0,null!=(r=e.max)?r:1/0);+a!==t&&(a=t.toString())}}let d=0;if(e.formatter&&n===e.formatTrigger){const{formatter:t,maxlength:n}=e;if(a=t(a),T(n)&&_(a)>+n&&(a=ee(a,+n)),o.value&&l.focused){const{selectionEnd:e}=o.value,a=ee(s,e);d=_(t(a))-_(a)}}if(o.value&&o.value.value!==a)if(l.focused){let{selectionStart:e,selectionEnd:t}=o.value;if(o.value.value=a,T(e)&&T(t)){const n=_(a);u?(e-=u,t-=u):d&&(e+=d,t+=d),o.value.setSelectionRange(Math.min(e,n),Math.min(t,n))}}else o.value.value=a;a!==e.modelValue&&t("update:modelValue",a)},ne=e=>{e.target.composing||te(e.target.value)},le=()=>{var e;return null==(e=o.value)?void 0:e.blur()},oe=()=>{var e;return null==(e=o.value)?void 0:e.focus()},ie=()=>{const t=o.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const a=m();e.style.height="auto";let n=e.scrollHeight;if(v(t)){const{maxHeight:e,minHeight:a}=t;void 0!==e&&(n=Math.min(n,e)),void 0!==a&&(n=Math.max(n,a))}n&&(e.style.height=`${n}px`,h(a))}(t,e.autosize)},re=e=>{l.focused=!0,t("focus",e),I(ie),p("readonly")&&le()},se=e=>{l.focused=!1,te(c(),"onBlur"),t("blur",e),p("readonly")||(G("onBlur"),I(ie),R())},ue=e=>t("clickInput",e),ce=e=>t("clickLeftIcon",e),de=e=>t("clickRightIcon",e),ge=w((()=>"boolean"==typeof e.error?e.error:!(!u||!u.props.showError||"failed"!==l.status)||void 0)),pe=w((()=>{const e=p("labelWidth"),t=p("labelAlign");if(e&&"top"!==t)return{width:B(e)}})),fe=a=>{13===a.keyCode&&(u&&u.props.submitOnEnter||"textarea"===e.type||g(a),"search"===e.type&&le()),t("keypress",a)},me=()=>e.id||`${n}-input`,ve=()=>{const t=ae("control",[p("inputAlign"),{error:ge.value,custom:!!a.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(a.input)return r("div",{class:t,onClick:ue},[a.input()]);const l={id:me(),ref:o,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:p("disabled"),readonly:p("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${n}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:se,onFocus:re,onInput:ne,onClick:ue,onChange:Z,onKeypress:fe,onCompositionend:Z,onCompositionstart:Y};return"textarea"===e.type?r("textarea",j(l,{inputmode:e.inputmode}),null):r("input",j((i=e.type,s=e.inputmode,"number"===i&&(i="text",null!=s||(s="decimal")),"digit"===i&&(i="tel",null!=s||(s="numeric")),{type:i,inputmode:s}),l),null);var i,s},he=()=>{const t=a["right-icon"];if(e.rightIcon||t)return r("div",{class:ae("right-icon"),onClick:de},[t?t():r(d,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},be=()=>{if(e.showWordLimit&&e.maxlength){const t=_(c());return r("div",{class:ae("word-limit")},[r("span",{class:ae("word-num")},[t]),W("/"),e.maxlength])}},ye=()=>{if(u&&!1===u.props.showErrorMessage)return;const t=e.errorMessage||l.validateMessage;if(t){const e=a["error-message"],n=p("errorMessageAlign");return r("div",{class:ae("error-message",n)},[e?e({message:t}):t])}},xe=()=>[r("div",{class:ae("body")},[ve(),b.value&&r(d,{ref:i,name:e.clearIcon,class:ae("clear")},null),he(),a.button&&r("div",{class:ae("button")},[a.button()])]),be(),ye()];return C({blur:le,focus:oe,validate:U,formValue:E,resetValidation:O,getValidationStatus:()=>l.status}),D(F,{customValue:s,resetValidation:O,validateWithTrigger:G}),M((()=>e.modelValue),(()=>{te(c()),O(),G("onChange"),I(ie)})),V((()=>{te(c(),e.formatTrigger),I(ie)})),z("touchstart",(e=>{g(e),t("update:modelValue",""),t("clear",e)}),{target:w((()=>{var e;return null==(e=i.value)?void 0:e.$el}))}),()=>{const t=p("disabled"),l=p("labelAlign"),o=(()=>{const t=a["left-icon"];if(e.leftIcon||t)return r("div",{class:ae("left-icon"),onClick:ce},[t?t():r(d,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return r(N,{size:e.size,class:ae({error:ge.value,disabled:t,[`label-${l}`]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:pe.value,valueClass:ae("value"),titleClass:[ae("label",[l,{required:$.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:o&&"top"!==l?()=>o:null,title:()=>{const t=(()=>{const t=p("labelWidth"),l=p("labelAlign"),o=p("colon")?":":"";return a.label?[a.label(),o]:e.label?r("label",{id:`${n}-label`,for:a.input?void 0:me(),"data-allow-mismatch":"attribute",onClick:e=>{g(e),oe()},style:"top"===l&&t?{width:B(t)}:void 0},[e.label+o]):void 0})();return"top"===l?[o,t].filter(Boolean):t||[]},value:xe,extra:a.extra})}}});e("F",p(oe))}}}));
