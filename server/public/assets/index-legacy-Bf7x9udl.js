System.register(["./index-legacy-VBvvbyTG.js","./index-legacy-DynxwLUi.js"],(function(e,t){"use strict";var a,n,l,o,i,r,s,u,c,d,g,p,f,m,v,h,b,y,x,k,S,w,B,C,M,V,I,T,z,A,P,E,L,$,q,j,W,R,F,H,O,D,N;return{setters:[e=>{a=e.u,n=e.r,l=e.L,o=e.C,i=e.c},e=>{r=e.d,s=e.T,u=e.c,c=e.ae,d=e.f,g=e.L,p=e.n,f=e.I,m=e.p,v=e.i,h=e.X,b=e.af,y=e.U,x=e.ag,k=e.ah,S=e.ai,w=e.a,B=e.r,C=e.aj,M=e.a5,V=e.C,I=e.a3,T=e.w,z=e.o,A=e.g,P=e.e,E=e.R,L=e.ak,$=e.al,q=e.m,j=e.A,W=e.a4,R=e.am,F=e.t,H=e.O,O=e.an,D=e.ao,N=e.ap}],execute:function(){const[t,K]=u("button"),U=s({},n,{tag:g("button"),text:String,icon:String,type:g("default"),size:g("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:g("button"),loadingSize:p,loadingText:String,loadingType:String,iconPosition:g("left")});var X=r({name:t,props:U,emits:["click"],setup(e,{emit:t,slots:n}){const o=a(),i=()=>e.loading?n.loading?n.loading():d(l,{size:e.loadingSize,type:e.loadingType,class:K("loading")},null):n.icon?d("div",{class:K("icon")},[n.icon()]):e.icon?d(f,{name:e.icon,class:K("icon"),classPrefix:e.iconPrefix},null):void 0,r=()=>{let t;if(t=e.loading?e.loadingText:n.default?n.default():e.text,t)return d("span",{class:K("text")},[t])},s=()=>{const{color:t,plain:a}=e;if(t){const e={color:a?t:"white"};return a||(e.background=t),t.includes("gradient")?e.border=0:e.borderColor=t,e}},u=a=>{e.loading?m(a):e.disabled||(t("click",a),o())};return()=>{const{tag:t,type:a,size:n,block:l,round:o,plain:g,square:p,loading:f,disabled:m,hairline:v,nativeType:h,iconPosition:b}=e,y=[K([a,n,{plain:g,block:l,round:o,square:p,loading:f,disabled:m,hairline:v}]),{[c]:v}];return d(t,{type:h,class:y,style:s(),disabled:m,onClick:u},{default:()=>[d("div",{class:K("content")},["left"===b&&i(),r(),"right"===b&&i()])]})}}});e("B",v(X));let G=0;function J(e){return Array.isArray(e)?!e.length:0!==e&&!e}function Q(e,t){const{message:a}=t;return k(a)?a(e,t):a||""}function Y({target:e}){e.composing=!0}function Z({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function _(e){return[...e].length}function ee(e,t){return[...e].slice(0,t).join("")}const[te,ae]=u("field"),ne={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:p,max:Number,min:Number,formatter:Function,clearIcon:g("clear"),modelValue:q(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:g("focus"),formatTrigger:g("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},le=s({},i,ne,{rows:p,type:g("text"),rules:Array,autosize:[Boolean,Object],labelWidth:p,labelClass:j,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var oe=r({name:te,props:le,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:a}){const n=function(){const e=h(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++G}`}(),l=w({status:"unvalidated",focused:!1,validateMessage:""}),i=B(),r=B(),s=B(),{parent:u}=C(W),c=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},g=t=>E(e[t])?e[t]:u&&E(u.props[t])?u.props[t]:void 0,p=M((()=>{const t=g("readonly");if(e.clearable&&!t){const t=""!==c(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&l.focused;return t&&a}return!1})),v=M((()=>s.value&&a.input?s.value():e.modelValue)),k=M((()=>{var t;const a=g("required");return"auto"===a?null==(t=e.rules)?void 0:t.some((e=>e.required)):a})),q=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===l.status)return;let{value:e}=v;if(t.formatter&&(e=t.formatter(e,t)),!function(e,t){if(J(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}(e,t))return l.status="failed",void(l.validateMessage=Q(e,t));if(t.validator){if(J(e)&&!1===t.validateEmpty)return;return function(e,t){return new Promise((a=>{const n=t.validator(e,t);S(n)?n.then(a):a(n)}))}(e,t).then((a=>{a&&"string"==typeof a?(l.status="failed",l.validateMessage=a):!1===a&&(l.status="failed",l.validateMessage=Q(e,t))}))}}))),Promise.resolve()),j=()=>{l.status="unvalidated",l.validateMessage=""},K=()=>t("endValidate",{status:l.status,message:l.validateMessage}),U=(a=e.rules)=>new Promise((n=>{j(),a?(t("startValidate"),q(a).then((()=>{"failed"===l.status?(n({name:e.name,message:l.validateMessage}),K()):(l.status="passed",n(),K())}))):n()})),X=t=>{if(u&&e.rules){const{validateTrigger:a}=u.props,n=R(a).includes(t),l=e.rules.filter((e=>e.trigger?R(e.trigger).includes(t):n));l.length&&U(l)}},te=(a,n="onChange")=>{var o,r;const s=a;a=(t=>{var a;const{maxlength:n}=e;if(E(n)&&_(t)>+n){const e=c();if(e&&_(e)===+n)return e;const o=null==(a=i.value)?void 0:a.selectionEnd;if(l.focused&&o){const e=[...t],a=e.length-+n;return e.splice(o-a,a),e.join("")}return ee(t,+n)}return t})(a);const u=_(s)-_(a);if("number"===e.type||"digit"===e.type){const t="number"===e.type;if(a=L(a,t,t),"onBlur"===n&&""!==a&&(void 0!==e.min||void 0!==e.max)){const t=$(+a,null!=(o=e.min)?o:-1/0,null!=(r=e.max)?r:1/0);+a!==t&&(a=t.toString())}}let d=0;if(e.formatter&&n===e.formatTrigger){const{formatter:t,maxlength:n}=e;if(a=t(a),E(n)&&_(a)>+n&&(a=ee(a,+n)),i.value&&l.focused){const{selectionEnd:e}=i.value,a=ee(s,e);d=_(t(a))-_(a)}}if(i.value&&i.value.value!==a)if(l.focused){let{selectionStart:e,selectionEnd:t}=i.value;if(i.value.value=a,E(e)&&E(t)){const n=_(a);u?(e-=u,t-=u):d&&(e+=d,t+=d),i.value.setSelectionRange(Math.min(e,n),Math.min(t,n))}}else i.value.value=a;a!==e.modelValue&&t("update:modelValue",a)},ne=e=>{e.target.composing||te(e.target.value)},le=()=>{var e;return null==(e=i.value)?void 0:e.blur()},oe=()=>{var e;return null==(e=i.value)?void 0:e.focus()},ie=()=>{const t=i.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const a=b();e.style.height="auto";let n=e.scrollHeight;if(y(t)){const{maxHeight:e,minHeight:a}=t;void 0!==e&&(n=Math.min(n,e)),void 0!==a&&(n=Math.max(n,a))}n&&(e.style.height=`${n}px`,x(a))}(t,e.autosize)},re=e=>{l.focused=!0,t("focus",e),A(ie),g("readonly")&&le()},se=e=>{l.focused=!1,te(c(),"onBlur"),t("blur",e),g("readonly")||(X("onBlur"),A(ie),O())},ue=e=>t("clickInput",e),ce=e=>t("clickLeftIcon",e),de=e=>t("clickRightIcon",e),ge=M((()=>"boolean"==typeof e.error?e.error:!(!u||!u.props.showError||"failed"!==l.status)||void 0)),pe=M((()=>{const e=g("labelWidth"),t=g("labelAlign");if(e&&"top"!==t)return{width:V(e)}})),fe=a=>{13===a.keyCode&&(u&&u.props.submitOnEnter||"textarea"===e.type||m(a),"search"===e.type&&le()),t("keypress",a)},me=()=>e.id||`${n}-input`,ve=()=>{const t=ae("control",[g("inputAlign"),{error:ge.value,custom:!!a.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(a.input)return d("div",{class:t,onClick:ue},[a.input()]);const l={id:me(),ref:i,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${n}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:se,onFocus:re,onInput:ne,onClick:ue,onChange:Z,onKeypress:fe,onCompositionend:Z,onCompositionstart:Y};return"textarea"===e.type?d("textarea",H(l,{inputmode:e.inputmode}),null):d("input",H((o=e.type,r=e.inputmode,"number"===o&&(o="text",null!=r||(r="decimal")),"digit"===o&&(o="tel",null!=r||(r="numeric")),{type:o,inputmode:r}),l),null);var o,r},he=()=>{const t=a["right-icon"];if(e.rightIcon||t)return d("div",{class:ae("right-icon"),onClick:de},[t?t():d(f,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},be=()=>{if(e.showWordLimit&&e.maxlength){const t=_(c());return d("div",{class:ae("word-limit")},[d("span",{class:ae("word-num")},[t]),F("/"),e.maxlength])}},ye=()=>{if(u&&!1===u.props.showErrorMessage)return;const t=e.errorMessage||l.validateMessage;if(t){const e=a["error-message"],n=g("errorMessageAlign");return d("div",{class:ae("error-message",n)},[e?e({message:t}):t])}},xe=()=>[d("div",{class:ae("body")},[ve(),p.value&&d(f,{ref:r,name:e.clearIcon,class:ae("clear")},null),he(),a.button&&d("div",{class:ae("button")},[a.button()])]),be(),ye()];return I({blur:le,focus:oe,validate:U,formValue:v,resetValidation:j,getValidationStatus:()=>l.status}),D(N,{customValue:s,resetValidation:j,validateWithTrigger:X}),T((()=>e.modelValue),(()=>{te(c()),j(),X("onChange"),A(ie)})),z((()=>{te(c(),e.formatTrigger),A(ie)})),P("touchstart",(e=>{m(e),t("update:modelValue",""),t("clear",e)}),{target:M((()=>{var e;return null==(e=r.value)?void 0:e.$el}))}),()=>{const t=g("disabled"),l=g("labelAlign"),i=(()=>{const t=a["left-icon"];if(e.leftIcon||t)return d("div",{class:ae("left-icon"),onClick:ce},[t?t():d(f,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return d(o,{size:e.size,class:ae({error:ge.value,disabled:t,[`label-${l}`]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:pe.value,valueClass:ae("value"),titleClass:[ae("label",[l,{required:k.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:i&&"top"!==l?()=>i:null,title:()=>{const t=(()=>{const t=g("labelWidth"),l=g("labelAlign"),o=g("colon")?":":"";return a.label?[a.label(),o]:e.label?d("label",{id:`${n}-label`,for:a.input?void 0:me(),"data-allow-mismatch":"attribute",onClick:e=>{m(e),oe()},style:"top"===l&&t?{width:V(t)}:void 0},[e.label+o]):void 0})();return"top"===l?[i,t].filter(Boolean):t||[]},value:xe,extra:a.extra})}}});e("F",v(oe))}}}));
