System.register(["./index-legacy-DEO5MG59.js","./index-legacy-D_GAN2QI.js","./index-legacy-g5vL8_KN.js","./index-legacy-CKdb1S0Y.js","./route-block-legacy-wdPIt6g0.js"],(function(e,t){"use strict";var s,a,n,l,i,u,o,c,r,d,g,h,p,m,f,v,y,x,_,T,k,b,D,V,H,j,S,N,$,C,z,F,I,L,O;return{setters:[e=>{s=e.d,a=e.m,n=e.n,l=e.c,i=e.r,u=e.u,o=e.a,c=e.b,r=e.w,d=e.e,g=e.f,h=e.p,p=e.g,m=e.h,f=e.i,v=e.j,y=e.o,x=e.k,_=e.l,T=e.q,k=e.s,b=e.t,D=e.F,V=e.v,H=e.x,j=e.y,S=e.z,N=e.A,$=e._},e=>{C=e.C,z=e.s},e=>{F=e.T},e=>{I=e.L,L=e.C},e=>{O=e.b}],execute:function(){const[t,q,w]=l("pull-refresh"),B=["pulling","loosing","success"],E={disabled:Boolean,modelValue:Boolean,headHeight:a(50),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:n,successDuration:a(500),animationDuration:a(300)};var P=s({name:t,props:E,emits:["change","refresh","update:modelValue"],setup(e,{emit:t,slots:s}){let a;const n=i(),l=i(),f=u(n),v=o({status:"normal",distance:0,duration:0}),y=c(),x=()=>{if(50!==e.headHeight)return{height:`${e.headHeight}px`}},_=()=>"loading"!==v.status&&"success"!==v.status&&!e.disabled,T=(s,a)=>{const n=+(e.pullDistance||e.headHeight);v.distance=s,v.status=a?"loading":0===s?"normal":s<n?"pulling":"loosing",t("change",{status:v.status,distance:s})},k=()=>{const{status:t}=v;return"normal"===t?"":e[`${t}Text`]||w(t)},b=()=>{const{status:e,distance:t}=v;if(s[e])return s[e]({distance:t});const a=[];return B.includes(e)&&a.push(g("div",{class:q("text")},[k()])),"loading"===e&&a.push(g(I,{class:q("loading")},{default:k})),a},D=e=>{a=0===m(f.value),a&&(v.duration=0,y.start(e))},V=e=>{_()&&D(e)},H=()=>{a&&y.deltaY.value&&_()&&(v.duration=+e.animationDuration,"loosing"===v.status?(T(+e.headHeight,!0),t("update:modelValue",!0),p((()=>t("refresh")))):T(0))};return r((()=>e.modelValue),(t=>{v.duration=+e.animationDuration,t?T(+e.headHeight,!0):s.success||e.successText?(v.status="success",setTimeout((()=>{T(0)}),+e.successDuration)):T(0,!1)})),d("touchmove",(t=>{if(_()){a||D(t);const{deltaY:s}=y;y.move(t),a&&s.value>=0&&y.isVertical()&&(h(t),T((t=>{const s=+(e.pullDistance||e.headHeight);return t>s&&(t=t<2*s?s+(t-s)/2:1.5*s+(t-2*s)/4),Math.round(t)})(s.value)))}}),{target:l}),()=>{var e;const t={transitionDuration:`${v.duration}ms`,transform:v.distance?`translate3d(0,${v.distance}px, 0)`:""};return g("div",{ref:n,class:q()},[g("div",{ref:l,class:q("track"),style:t,onTouchstartPassive:V,onTouchend:H,onTouchcancel:H},[g("div",{class:q("head"),style:x()},[b()]),null==(e=s.default)?void 0:e.call(s)])])}}});const Y=f(P),A={class:"device-list"},J=s({__name:"index",setup(e){const t=i([]),s=i(!1),a=v();async function n(){s.value=!0;try{const e=await N.get("/userPool");t.value=e}catch(e){z("获取设备列表失败"),console.error("获取设备列表失败:",e)}finally{s.value=!1}}return y((()=>{n()})),(e,l)=>{const i=I,u=L,o=F,c=C,r=Y;return _(),x("div",A,[g(r,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),onRefresh:n},{default:T((()=>[g(c,{inset:!0},{default:T((()=>[s.value?(_(),k(u,{key:0,center:""},{title:T((()=>[g(i,{type:"spinner",size:"24px"},{default:T((()=>l[1]||(l[1]=[b(" 加载中... ")]))),_:1,__:[1]})])),_:1})):(_(!0),x(D,{key:1},V(t.value,(e=>(_(),k(u,{key:e.imei,title:e.imei,label:`No: ${e.phone||"未设置"}`,"is-link":"",onClick:t=>function(e){a.push({path:"/control",query:{device:JSON.stringify(e)}})}(e)},{"right-icon":T((()=>[g(o,{type:e.connected?"success":"danger",size:"medium",round:"",class:"status-tag"},{default:T((()=>[H("span",{class:"status-dot",style:j({background:e.connected?"#4ade80":"#f56c6c"})},null,4),b(" "+S(e.connected?"ONLINE":"OFFLINE"),1)])),_:2},1032,["type"])])),_:2},1032,["title","label","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])}}});"function"==typeof O&&O(J),e("default",$(J,[["__scopeId","data-v-c13d3e94"]]))}}}));
