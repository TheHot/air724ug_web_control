System.register(["./index-legacy-DynxwLUi.js","./index-legacy-DXvHQv6C.js","./index-legacy-VBvvbyTG.js","./route-block-legacy-wdPIt6g0.js"],(function(e,t){"use strict";var s,a,n,i,l,u,o,c,r,d,g,h,m,p,f,v,y,x,T,_,k,D,V,b,H,S,j,$,C,q,w,z;return{setters:[e=>{s=e.d,a=e.m,n=e.n,i=e.c,l=e.r,u=e.u,o=e.a,c=e.b,r=e.w,d=e.e,g=e.f,h=e.p,m=e.g,p=e.h,f=e.i,v=e.j,y=e.o,x=e.k,T=e.l,_=e.q,k=e.s,D=e.t,V=e.F,b=e.v,H=e.x,S=e.y},e=>{j=e.C,$=e.T,C=e.s},e=>{q=e.L,w=e.C},e=>{z=e.b}],execute:function(){const[t,B,N]=i("pull-refresh"),P=["pulling","loosing","success"],Y={disabled:Boolean,modelValue:Boolean,headHeight:a(50),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:n,successDuration:a(500),animationDuration:a(300)};var F=s({name:t,props:Y,emits:["change","refresh","update:modelValue"],setup(e,{emit:t,slots:s}){let a;const n=l(),i=l(),f=u(n),v=o({status:"normal",distance:0,duration:0}),y=c(),x=()=>{if(50!==e.headHeight)return{height:`${e.headHeight}px`}},T=()=>"loading"!==v.status&&"success"!==v.status&&!e.disabled,_=(s,a)=>{const n=+(e.pullDistance||e.headHeight);v.distance=s,v.status=a?"loading":0===s?"normal":s<n?"pulling":"loosing",t("change",{status:v.status,distance:s})},k=()=>{const{status:t}=v;return"normal"===t?"":e[`${t}Text`]||N(t)},D=()=>{const{status:e,distance:t}=v;if(s[e])return s[e]({distance:t});const a=[];return P.includes(e)&&a.push(g("div",{class:B("text")},[k()])),"loading"===e&&a.push(g(q,{class:B("loading")},{default:k})),a},V=e=>{a=0===p(f.value),a&&(v.duration=0,y.start(e))},b=e=>{T()&&V(e)},H=()=>{a&&y.deltaY.value&&T()&&(v.duration=+e.animationDuration,"loosing"===v.status?(_(+e.headHeight,!0),t("update:modelValue",!0),m((()=>t("refresh")))):_(0))};return r((()=>e.modelValue),(t=>{v.duration=+e.animationDuration,t?_(+e.headHeight,!0):s.success||e.successText?(v.status="success",setTimeout((()=>{_(0)}),+e.successDuration)):_(0,!1)})),d("touchmove",(t=>{if(T()){a||V(t);const{deltaY:s}=y;y.move(t),a&&s.value>=0&&y.isVertical()&&(h(t),_((t=>{const s=+(e.pullDistance||e.headHeight);return t>s&&(t=t<2*s?s+(t-s)/2:1.5*s+(t-2*s)/4),Math.round(t)})(s.value)))}}),{target:i}),()=>{var e;const t={transitionDuration:`${v.duration}ms`,transform:v.distance?`translate3d(0,${v.distance}px, 0)`:""};return g("div",{ref:n,class:B()},[g("div",{ref:i,class:B("track"),style:t,onTouchstartPassive:b,onTouchend:H,onTouchcancel:H},[g("div",{class:B("head"),style:x()},[D()]),null==(e=s.default)?void 0:e.call(s)])])}}});const J=f(F),L={class:"device-list"},M=e("default",s({__name:"index",setup(e){const t=l([]),s=l(!1),a=v();async function n(){s.value=!0;try{const e=await S.get("/userPool");t.value=e}catch(e){C("获取设备列表失败"),console.error("获取设备列表失败:",e)}finally{s.value=!1}}return y((()=>{n()})),(e,i)=>{const l=q,u=w,o=$,c=j,r=J;return T(),x("div",L,[g(r,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),onRefresh:n},{default:_((()=>[g(c,{inset:!0},{default:_((()=>[s.value?(T(),k(u,{key:0,center:""},{title:_((()=>[g(l,{type:"spinner",size:"24px"},{default:_((()=>i[1]||(i[1]=[D(" 加载中... ")]))),_:1,__:[1]})])),_:1})):(T(!0),x(V,{key:1},b(t.value,(e=>(T(),k(u,{key:e.imei,title:e.imei,label:`No: ${e.phone||"未设置"}`,"is-link":"",onClick:t=>function(e){a.push({path:"/control",query:{device:JSON.stringify(e)}})}(e)},{"right-icon":_((()=>[g(o,{type:e.connected?"success":"danger",size:"medium"},{default:_((()=>[D(H(e.connected?"在线":"离线"),1)])),_:2},1032,["type"])])),_:2},1032,["title","label","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])}}}));"function"==typeof z&&z(M)}}}));
